#/bin/bash

monitors=$(xrandr | grep " connected" | awk '{print $1}')
IFS=$'\n' monitors=($monitors)

num_monitors=${#monitors[@]}

echo "Monitors detected: $num_monitors"
echo "Monitors: ${monitors[@]}"

# if second argument is 0, only display primary monitor
# if second argument is 1, set laptop monitor as primary, and external monitor as secondary
# if second argument is 2, set external monitor as primary, and laptop monitor as secondary
# on any error, only display primary monitor which is laptop monitor

args=("$@")

if [ ${args[0]} -eq 0 ]; then
    echo "Only primary monitor will be displayed"
    xrandr --output ${monitors[0]} --auto
    exit
elif [ ${args[0]} -eq 1 ]; then
    echo "Setting laptop monitor as primary and external monitor as secondary"
    xrandr --output ${monitors[0]} --auto --primary --output ${monitors[1]} --auto --right-of ${monitors[0]}
    echo "Set ${monitors[0]} as primary and ${monitors[1]} as secondary"
    exit
elif [ ${args[0]} -eq 2 ]; then
    echo "Setting external monitor as primary and laptop monitor as secondary"
    xrandr --output ${monitors[1]} --auto --primary --output ${monitors[0]} --auto --right-of ${monitors[1]}
    echo "Set ${monitors[1]} as primary and ${monitors[0]} as secondary"
    exit
else
    echo "Unknown argument, only primary monitor will be displayed"
    xrandr --output ${monitors[0]} --auto
    exit
fi
#
# if [ $num_monitors -eq 1 ]; then
#     echo "Single monitor detected"
#     xrandr --output ${monitors[0]} --auto
# elif [ $num_monitors -eq 2 ]; then
#     echo "Dual monitor detected"
#     xrandr --output ${monitors[0]} --auto --primary --output ${monitors[1]} --auto --right-of ${monitors[0]}
#     echo "Set ${monitors[0]} as primary and ${monitors[1]} as secondary"
# else
#     echo "Unknown number of monitors detected"
# fi
